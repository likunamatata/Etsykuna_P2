{"ast":null,"code":"import _toConsumableArray from\"/Users/liakapanadze/Mandalorians/Unit_2/Mini_Etsy_P2/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/liakapanadze/Mandalorians/Unit_2/Mini_Etsy_P2/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/liakapanadze/Mandalorians/Unit_2/Mini_Etsy_P2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/liakapanadze/Mandalorians/Unit_2/Mini_Etsy_P2/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/liakapanadze/Mandalorians/Unit_2/Mini_Etsy_P2/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/liakapanadze/Mandalorians/Unit_2/Mini_Etsy_P2/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/liakapanadze/Mandalorians/Unit_2/Mini_Etsy_P2/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/liakapanadze/Mandalorians/Unit_2/Mini_Etsy_P2/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/liakapanadze/Mandalorians/Unit_2/Mini_Etsy_P2/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import BrowserDashboard from'./BrowserDashboard.js';import{Route}from'react-router-dom';import axios from'axios';import Categories from'./filters/Categories.js';import Shops from'./filters/Shops.js';import Keywords from'./filters/Keywords.js';var SHOP_ID='';var BASE_URL=\"https://openapi.etsy.com/v2/shops/\";var LISTINGS_ENDPOINT=\"/listings/active?includes=MainImage&&\";var API_KEY=\"&&api_key=\".concat(process.env.REACT_APP_API_KEY);var CORS=\"https://cors-anywhere.herokuapp.com/\";var ListingsContainer=/*#__PURE__*/function(_Component){_inherits(ListingsContainer,_Component);function ListingsContainer(){var _this;_classCallCheck(this,ListingsContainer);_this=_possibleConstructorReturn(this,_getPrototypeOf(ListingsContainer).call(this));_this.handleChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:SHOP_ID=event.target.value;_this.setState({loaded:true});_this.getData(SHOP_ID);case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.getData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(SHOP_ID){var allData1,allData2,allData3,results1,results2,results3;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(CORS+\"\".concat(BASE_URL).concat(SHOP_ID).concat(LISTINGS_ENDPOINT,\"limit=100&offset=0\").concat(API_KEY));case 2:allData1=_context2.sent;_context2.next=5;return axios.get(CORS+\"\".concat(BASE_URL).concat(SHOP_ID).concat(LISTINGS_ENDPOINT,\"limit=100&offset=100\").concat(API_KEY));case 5:allData2=_context2.sent;_context2.next=8;return axios.get(CORS+\"\".concat(BASE_URL).concat(SHOP_ID).concat(LISTINGS_ENDPOINT,\"limit=100&offset=200\").concat(API_KEY));case 8:allData3=_context2.sent;//turning them into arrays to concatanate easily\nresults1=allData1!==''?allData1.data.results:'';results2=allData1!==''?allData2.data.results:'';results3=allData1!==''?allData3.data.results:'';_this.setState({allData:[].concat(_toConsumableArray(results1),_toConsumableArray(results2),_toConsumableArray(results3)),displayedData:[].concat(_toConsumableArray(results1),_toConsumableArray(results2),_toConsumableArray(results3))});case 13:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleFilter=function(event){var originalData=_this.state.allData;var filteredData=originalData.filter(function(listing){return listing.tags.join().includes(event.target.value);});_this.setState({displayedData:filteredData});};_this.handleKey=function(event){var originalData=_this.state.allData;var filteredData=originalData.filter(function(listing){return listing.title.includes(event.target.value);});_this.setState({displayedData:filteredData});};_this.state={allData:[],displayedData:[],category:'',loaded:false};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(ListingsContainer,[{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"container\"},React.createElement(\"div\",{className:\"browseHeader\"},React.createElement(Shops,{handleChange:this.handleChange}),React.createElement(\"div\",{className:\"filters\"},React.createElement(Categories,{show:this.state.loaded,handleFilter:this.handleFilter}),React.createElement(Keywords,{show:this.state.loaded,handleKey:this.handleKey}))),React.createElement(Route,{exact:true,path:\"/Browse\"},React.createElement(BrowserDashboard,{category:this.state.category,data:this.state.displayedData,loaded:this.state.loaded})));}}]);return ListingsContainer;}(Component);export default ListingsContainer;","map":{"version":3,"sources":["/Users/liakapanadze/Mandalorians/Unit_2/Mini_Etsy_P2/src/components/ListingsContainer.js"],"names":["React","Component","BrowserDashboard","Route","axios","Categories","Shops","Keywords","SHOP_ID","BASE_URL","LISTINGS_ENDPOINT","API_KEY","process","env","REACT_APP_API_KEY","CORS","ListingsContainer","handleChange","event","target","value","setState","loaded","getData","get","allData1","allData2","allData3","results1","data","results","results2","results3","allData","displayedData","handleFilter","originalData","state","filteredData","filter","listing","tags","join","includes","handleKey","title","category","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport BrowserDashboard from './BrowserDashboard.js';\nimport { Route } from 'react-router-dom';\nimport axios from 'axios';\nimport Categories from './filters/Categories.js';\nimport Shops from './filters/Shops.js';\nimport Keywords from './filters/Keywords.js';\n\n\nlet SHOP_ID = '';\nconst BASE_URL = `https://openapi.etsy.com/v2/shops/`;\nconst LISTINGS_ENDPOINT = `/listings/active?includes=MainImage&&`;\nconst API_KEY = `&&api_key=${process.env.REACT_APP_API_KEY}`;\nconst CORS = `https://cors-anywhere.herokuapp.com/`;\n\n\nclass ListingsContainer extends Component {\n  constructor() {\n    super();\n    this.state = {\n      allData: [],\n      displayedData: [],\n      category: '',\n      loaded: false\n    }\n    this.handleChange = this.handleChange.bind(this)\n  }\n\n  handleChange = async (event) => {\n    SHOP_ID = event.target.value;\n    this.setState({\n      loaded: true\n    })\n\n    this.getData(SHOP_ID)\n  }\n\n  getData = async (SHOP_ID) => {\n    //Etsy API maxes out at 100 objects, but there's a multiple request workaround if you want to get more data\n    const allData1 = await axios.get(CORS + `${BASE_URL}${SHOP_ID}${LISTINGS_ENDPOINT}limit=100&offset=0${API_KEY}`)\n    const allData2 = await axios.get(CORS + `${BASE_URL}${SHOP_ID}${LISTINGS_ENDPOINT}limit=100&offset=100${API_KEY}`)\n    const allData3 = await axios.get(CORS + `${BASE_URL}${SHOP_ID}${LISTINGS_ENDPOINT}limit=100&offset=200${API_KEY}`)\n\n    //turning them into arrays to concatanate easily\n    const results1 = allData1 !== '' ? allData1.data.results : ''\n    const results2 = allData1 !== '' ? allData2.data.results : ''\n    const results3 = allData1 !== '' ? allData3.data.results : ''\n\n    this.setState({\n      allData: [...results1, ...results2, ...results3],\n      displayedData: [...results1, ...results2, ...results3],\n    })\n  }\n\n\n  //need to figure out a way to filter displayedData with the outcome of my handleFilter in category\n\n  handleFilter = (event) => {\n    const originalData = this.state.allData\n    const filteredData = originalData.filter((listing) => {\n      return listing.tags.join().includes(event.target.value)\n    })\n    this.setState({\n      displayedData: filteredData\n    })\n  }\n\n  handleKey = (event) => {\n    const originalData = this.state.allData\n    const filteredData = originalData.filter((listing) => {\n      return listing.title.includes(event.target.value)\n    })\n    this.setState({\n      displayedData: filteredData\n    })\n  }\n\n\n\n  render() {\n    return (\n      <div className='container' >\n        <div className='browseHeader'>\n          <Shops handleChange={this.handleChange} />\n\n          <div className='filters'>\n            <Categories\n              show={this.state.loaded}\n              handleFilter={this.handleFilter}\n            />\n            <Keywords\n              show={this.state.loaded}\n              handleKey={this.handleKey}\n            />\n          </div>\n\n        </div>\n\n        <Route exact path='/Browse'>\n          <BrowserDashboard\n            category={this.state.category}\n            data={this.state.displayedData}\n            loaded={this.state.loaded} />\n        </Route>\n\n      </div >\n\n    )\n  }\n}\n\nexport default ListingsContainer;\n"]},"metadata":{},"sourceType":"module"}